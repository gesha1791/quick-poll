# <a href="http://git.foxminded.com.ua/gesha17/quick-poll">Chapter 7</a>

#### 1. Назвать варианты версионирования эндпоинтов.
Через URI включаем номер версии в путь URL конечной точки, например /api/v1/polls

Через параметры запроса передаем номер версии в качестве параметра запроса с указанным именем, например /api/polls?Version = 1

Через пользовательские заголовки HTTP, определяем новый заголовок, который содержит номер версии в запросе. Accept: application / vnd.quickpoll.v2 + json"

Custom Header Versioning. Вместо заголовка Accept используется пользовательский заголовок.

####  2. 2 high level основные стратегии версионирования кода и модулей приложения
Полное дублирование кода и частичное дублирование ( например только контроллеры и dto).
#### 3. (Опционально) Дополнить варианты версионирования эндпоинтов мнением про их сильные и слабые стороны, какой более предпочтительный в той или иной ситуации.

URI versioning. Очень удобный и распространённый вариант, информация о версии находится в URI. Это упрощает разработку и тестирование api. Для клиента вызывает сложности например в работе с БД, при переходе на новую версию ему нужно обновлять данные с БД.

URI parameter version. В параметре передается версия, по дефолту передаётся последняя версия . Эта стратегия не так популярна. Недостатки такие же как и URI versioning, так же минусом является то что некотрые прокси не кешерируют ресурсы параметром URI, что приводит к дополнительному сетевому трафику.

Accept Header Versioning. Эта версия становится все более популярной потому что детализирует управления версиями отдельных ресурсов без влияния на  API. Но этот подход может усложнить тестирование браузера, так как мы должны тщательно обработать заголовок Accept

Custom Header Versioning. Те же плюсы и минусы что у предыдущего, но этот метод не получил широкого распространения.
#### 4. В коде мы задали контроллеру имя "pollControllerV1", какое имя по умолчанию и для чего мы задали своё.
По умолчанию poll-controller.
Для каждого контроллера в новом пакете v1 добавим аннотацию уровня класса @RequestMapping («/ v1 /»). Поскольку у нас будет несколько версий контроллеров, нам нужно дать уникальные имена компонентов отдельным контроллерам. Мы будем следовать соглашению о добавлении номера версии к имени класса для получения имени нашего компонента. Используя это соглашение, v1 PollController будет иметь имя компонента pollControllerV1.
Имя компонента предоставляется в качестве значения для аннотации @RestController.
#### 5. Предположим мы разработали 4 версии нашего Restful API, как будет выглядеть URL для swagger rest api приложения версии 3?
http://localhost:8080/v3/polls (edited)
#### 6. Тип объекта, который мы создаем для добавление новой версии API в Swagger и название метода для указания версии.
Bean Docket,  apiInfo(new ApiInfoBuilder().version());
#### 7. 4 стратегии пегинации (pagination)
Page Number Pagination, Limit Offset Pagination, Cursor-Based Pagination, Time-Based Pagination (edited)
#### 8. Основные спринговые типы и их назначения которые вы использовали для функциональности пагинации и сортировки, включая настройку размера страницы по умолчанию.

Главным элементом пагинации и сортировки в Spring Data JPA является интерфейс org.springframework.data.repository.PagingAndSortingRepository.  Интерфейс PagingAndSortingRepository расширяет интерфейс CrudRepository. В нем находится 2 новых метода. Один для поиска другой сортировки. Метод findAll для пагинации возвращает Page со всей информацией. Для пагинации так же добавляем параметр метода, Pageable.
Пагинцаия по умолчанию 20 значений. Я менял ее с помощью аннотации @PageableDefault (size = {указание кол-ва}), аннотацию ставим возле параметра метода Pageable)
Сортировка двух направления по возрастанию и по убыванию . Выполняется с помощью параметров запроса.
#### 9. (Опционально) Предположим есть реестр инстансов restful микросервисов, в котором каждый инстанс регестрирует (анонсирует) свое появление (запуск) и завершение работы. До 100 000 инстансов всего. Обновление каждые 5 сек. Какую стратегию пегинации будете использовать и почему?
Возможно Cursor-Based Pagination, мы работаем с данными в реально времени и данные часто изменяются, как у нас указано каждые 5 секунд.
#### 10. (Опционально) Привести пример сортировки 1-2 ресурсов по 2-3 полям для задачи «Design Forum API».
http://localhost:8080/v2/topics/?sort=themes,asc&sort=id,desc ,
http://localhost:8090/v2/posts/?sort=postValue,asc&sort=id,desc&sort=countVotes,desc